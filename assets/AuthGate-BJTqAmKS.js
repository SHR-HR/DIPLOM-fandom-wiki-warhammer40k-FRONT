import{c as i,a as f,h as w,k as j,u as v,r as s,j as e,n as o,z as N,A as I,S}from"./index-BOMAx2s1.js";const E=i("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);const A=i("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const C=i("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function L(){const l=f(),x=w(),[g]=j(),r=v(a=>a.auth.mode),[t,p]=s.useState(""),[n,b]=s.useState(""),[d,u]=s.useState(!1),h=s.useId(),m=s.useId(),c=async()=>{if(r==="local"){if(!t.trim()){o.error("Введите логин");return}}else if(!t.trim()||!n.trim()){o.error("Заполните все поля");return}u(!0);try{await l(N({username:t,password:n})).unwrap(),o.success("Успешный вход");const a=g.get("expired")==="1",y=I();a?x(y||"/",{replace:!0}):x(y||"/",{replace:!0})}catch{o.error("Неверный логин или пароль")}finally{u(!1)}},k=r==="local"?!t.trim()||d:!(t.trim()&&n.trim())||d;return e.jsxs("div",{className:`
        max-w-md mx-auto p-8 rounded-2xl border-2 border-brass
        bg-white text-gray-900 shadow-[0_12px_28px_rgba(0,0,0,.08)]
        dark:bg-gradient-to-br dark:from-gray-900 dark:to-black dark:text-gray-100
      `,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(E,{className:"w-6 h-6 text-brass"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-brass",children:"Вход в систему"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:h,className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Логин"}),e.jsx("input",{id:h,name:"login",type:"text",autoComplete:"username",className:`
              w-full px-4 py-3 rounded-lg
              bg-white border border-gray-300 text-gray-900 placeholder-gray-400
              focus:ring-2 focus:ring-brass focus:border-brass outline-none transition
              dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:placeholder-gray-400
            `,placeholder:"Введите логин",value:t,onChange:a=>p(a.target.value),onKeyDown:a=>a.key==="Enter"&&c()})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:m,className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:["Пароль",r==="local"?" (не требуется)":""]}),e.jsx("input",{id:m,name:"password",type:"password",autoComplete:"current-password",disabled:r==="local",className:`
              w-full px-4 py-3 rounded-lg
              bg-white border border-gray-300 text-gray-900 placeholder-gray-400
              focus:ring-2 focus:ring-brass focus:border-brass outline-none transition
              dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:placeholder-gray-400
              disabled:opacity-60
            `,placeholder:r==="local"?"В local можно оставить пустым":"Введите пароль",value:n,onChange:a=>b(a.target.value),onKeyDown:a=>a.key==="Enter"&&c()})]}),e.jsx("button",{type:"button",className:`
            w-full py-3 px-6 font-bold rounded-lg transition
            bg-brass text-black hover:brightness-105
            disabled:opacity-50 disabled:cursor-not-allowed
          `,onClick:c,disabled:k,children:d?"Вход...":"Войти"})]})]})}function P(){return s.useEffect(()=>{try{const l=location.pathname+location.search;sessionStorage.setItem("return_to",l)}catch{}},[]),e.jsx("div",{className:"py-10 min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-2xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(S,{className:"w-16 h-16 mx-auto text-brass mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-2 text-gray-900 dark:text-white",children:"Требуется авторизация"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Для доступа к этой странице необходимо войти в систему"})]}),e.jsx(L,{})]})})}export{P as A,A as P,C as T};
